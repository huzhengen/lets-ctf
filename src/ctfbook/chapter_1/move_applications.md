## CTF比赛类型与Move应用场景

欢迎来到 **Move CTF 挑战课程** 的第一节！本节将带你走进 CTF（Capture The Flag，夺旗赛）的世界，了解其主要比赛类型，并探索 Move 编程语言在 Sui 区块链上的 CTF 应用场景。通过理论与实践结合，你将迈出学习 Move CTF 的第一步。

### 什么是CTF？
CTF 是一种网络安全竞赛形式，参与者通过解决技术挑战获取隐藏的 “flag”（通常是一串特定格式的字符串，如 `CTF{xxx}`），以证明他们的技能。CTF 起源于 1996 年的 DEFCON 安全大会，现已成为全球安全爱好者的热门活动。比赛类型主要分为以下两种：

#### 1. Jeopardy模式
- **特点**：解题模式，参与者面对一系列独立题目，涵盖密码学、逆向工程、Web 安全、区块链等类别。
- **流程**：
  - 题目提供线索（如代码片段、文件或服务器地址）。
  - 选手分析问题，找到 flag 并提交。
  - 根据解题数量和速度计分。
- **适合人群**：初学者和个人选手，因其灵活性和低门槛广受欢迎。
- **Move相关示例**：分析一段 Sui 链上的 Move 智能合约代码，找出隐藏的 flag 或利用漏洞提取数据。
- **真实案例**：
  - 在 [CTFtime](https://ctftime.org/) 上，[HackTheBox Cyber Apocalypse CTF 2024 Blockchain Challenges](https://www.hackthebox.com/events/cyber-apocalypse-2024) 包含区块链题目，要求选手审计智能合约。
  - Sui 社区在 2024 年推出了 [MoveCTF 2024](https://movectf2024.movebit.xyz/)，其中包括基于 Move 的解题挑战。
- **现状**：当前 Move CTF（如 justCTF、MoveCTF）主要采用 Jeopardy 模式，题目以代码审计和逻辑分析为主。

#### 2. Attack-Defense模式
- **特点**：攻防对抗模式，团队在虚拟环境中同时攻击对手服务并防御自身系统。
- **流程**：
  - 每个团队维护一个包含漏洞的服务。
  - 攻击对手以获取 flag，同时修补自身漏洞。
  - 综合得分决定排名。
- **适合人群**：进阶选手和团队，因其更接近真实网络攻防场景。
- **Move相关示例**：模拟 Sui 区块链网络，攻击对手的 Move 合约（如利用未授权访问漏洞窃取资源），同时保护自己的合约免受攻击。
- **现状**：目前 Move CTF 未见公开的攻防模式案例，更多聚焦于解题形式的挑战。

#### CTF的吸引力
- **技能提升**：涵盖编程、逆向、安全分析等多领域。
- **实战性**：模拟真实安全场景，如区块链漏洞利用。
- **趣味性**：解题过程如同解谜，充满成就感。

### Move 在 CTF 中的应用
Move 是由 Facebook（现 Meta）为 Diem 区块链设计的一种编程语言，后被 Sui 公链采用并优化。它以资源导向和类型安全著称，灵感来源于 Rust。在 Sui 生态中，Move 用于编写智能合约和去中心化应用（DApp）。以下是 Move 在 CTF 中的主要应用场景：

#### 1. 智能合约漏洞挖掘
- **背景**：Sui 链上的 Move 合约是 CTF 题目的常见素材，选手需分析代码，寻找漏洞。
- **常见考点**：
  - **整数溢出/下溢**：Move 未内置溢出检查，可能导致非法操作。例如，代币转移逻辑可能因溢出被绕过。
  - **逻辑错误**：如条件判断失误，导致意外行为。
- **示例**：假设一个 Move 代币合约未检查整数加法的溢出，选手可通过构造大额输入转移超出余额的代币，flag 可能隐藏在交易事件中。
- **Move特点**：Move 的类型系统减少了某些传统漏洞（如重入攻击），但仍需关注逻辑和边界问题。

#### 2. 资源管理挑战
- **Move特性**：Move 的资源（struct）具有线性类型特性，不可随意复制或丢弃，必须显式转移或销毁。这是 Sui 链上对象（Object）管理的核心机制。
- **CTF应用**：
  - 题目可能涉及资源管理不当（如未销毁资源）导致的漏洞。
  - 或通过资源转移逻辑的错误绕过限制。
- **示例**：设想一个 Move 合约中，开发者忘记销毁旧资源，导致资源被重复使用，选手可利用此漏洞执行双重花费。

#### 3. 代码逻辑逆向
- **背景**：CTF 常要求选手理解代码意图，寻找隐藏信息。
- **Move场景**：
  - flag 可能藏在注释、变量名或 Sui 链上的事件输出中。
  - 或通过复杂逻辑（如循环、条件）计算得出。
- **真实案例**：在 justCTF 2024 Teaser 的“The Otter Scrolls”题目（[justCTF 2024](https://2024.justctf.team/challenges/11)）中，选手需分析 Sui Move 合约 `Spellbook`，调用 `cast_spell` 函数并传入参数 `vector[1, 0, 3, 3, 3]`，触发 flag 输出。
- **总结**：Move 的资源导向和类型安全特性为 CTF 提供了独特的技术挑战，目前通过 Jeopardy 模式吸引爱好者参与并提升 Sui 生态的安全意识。

### 学习目标
通过本节课，你将：
- 理解 CTF 比赛的基本形式（Jeopardy 和 Attack-Defense）。
- 认识 Move 在 Sui 链 CTF 中的应用场景。
- 通过实践，初步体验 Move 代码分析，迈出 CTF 第一步。

准备好了吗？接下来，我们将通过一个简单实践，体验 Move CTF！